# Sports Platform Mock API

Микросервис, имитирующий API спортивной платформы для тестирования. Предоставляет захардкоженные данные о пользователях, командах, чемпионатах, матчах и приглашениях.

## Содержание

- [Установка и запуск](#установка-и-запуск)
  - [Через Docker Compose](#через-docker-compose)
  - [Локальный запуск](#локальный-запуск)
- [Доступные API-эндпоинты](#доступные-api-эндпоинты)
- [Тестовые данные](#тестовые-данные)
- [Примеры использования](#примеры-использования)

## Установка и запуск

### Через Docker Compose

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/yourusername/sports-platform-mock-api.git
   cd sports-platform-mock-api
   ```

2. Запустите контейнер с помощью Docker Compose:
   ```bash
   docker-compose up -d
   ```

3. Проверьте, что сервис запущен:
   ```bash
   docker-compose ps
   ```

4. Проверьте доступность сервиса:
   ```
   curl http://localhost:8080
   ```

5. Для остановки сервиса:
   ```bash
   docker-compose down
   ```

### Локальный запуск

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/yourusername/sports-platform-mock-api.git
   cd sports-platform-mock-api
   ```

2. Создайте и активируйте виртуальное окружение (опционально):
   ```bash
   python -m venv venv
   source venv/bin/activate  # Для Linux/macOS
   # или
   venv\Scripts\activate     # Для Windows
   ```

3. Установите зависимости:
   ```bash
   pip install flask
   ```

4. Запустите сервис:
   ```bash
   python app.py
   ```

5. Сервис будет доступен по адресу `http://localhost:8080`

## Доступные API-эндпоинты

| Метод | Эндпоинт | Описание |
|-------|----------|----------|
| GET | `/api/users/by-phone/{phone_number}` | Получение данных пользователя по номеру телефона |
| GET | `/api/matches/upcoming?days={days}` | Получение предстоящих матчей |
| GET | `/api/championships/recommended/{user_id}` | Получение рекомендуемых чемпионатов |
| POST | `/api/notifications/confirm-delivery` | Подтверждение доставки уведомления |
| GET | `/api/users/{user_id}/teams` | Получение команд пользователя |
| GET | `/api/users/{user_id}/championships` | Получение чемпионатов пользователя |
| GET | `/api/users/{user_id}/matches?status={status}` | Получение матчей пользователя |
| GET | `/api/teams/{team_id}` | Получение информации о команде |
| GET | `/api/championships/{tournament_id}` | Получение информации о чемпионате |
| POST | `/api/invitations/team/{invitation_id}/accept` | Принятие приглашения в команду |
| POST | `/api/invitations/team/{invitation_id}/decline` | Отклонение приглашения в команду |
| POST | `/api/invitations/committee/{invitation_id}/accept` | Принятие приглашения в оргкомитет |
| POST | `/api/invitations/committee/{invitation_id}/decline` | Отклонение приглашения в оргкомитет |
| GET | `/api/users/{user_id}/invitations?type={type}` | Получение приглашений пользователя |
| POST | `/api/matches/{match_id}/decline` | Отклонение участия в матче |

## Тестовые данные

### Пользователи

| Телефон | Имя | Фамилия | ID |
|---------|-----|---------|-----|
| 79001234567 | Иван | Иванов | 1 |
| 79002345678 | Петр | Петров | 2 |
| 79003456789 | Алексей | Сидоров | 3 |

### Команды

- **Пользователь 1 (Иван Иванов)**:
  - **Команда А** (ID: 101)
    - Вид спорта: Футбол
    - Роль: Капитан
    - Количество участников: 11
    - Статистика: 5 побед, 2 поражения
  
  - **Команда Б** (ID: 102)
    - Вид спорта: Баскетбол
    - Роль: Участник
    - Количество участников: 5
    - Статистика: 3 победы, 4 поражения

- **Пользователь 2 (Петр Петров)**:
  - **Команда В** (ID: 103)
    - Вид спорта: Волейбол
    - Роль: Капитан
    - Количество участников: 6
    - Статистика: 7 побед, 1 поражение

- **Пользователь 3 (Алексей Сидоров)**:
  - **Команда Г** (ID: 104)
    - Вид спорта: Хоккей
    - Роль: Участник
    - Количество участников: 6
    - Статистика: 2 победы, 8 поражений

### Чемпионаты

- **Пользователь 1 (Иван Иванов)**:
  - **Городской кубок по футболу** (ID: 201)
    - Вид спорта: Футбол
    - Город: Москва
    - Статус: Активный
    - Позиция: 1 место
  
  - **Зимний турнир по баскетболу** (ID: 202)
    - Вид спорта: Баскетбол
    - Город: Москва
    - Статус: Завершен
    - Позиция: 2 место

- **Пользователь 2 (Петр Петров)**:
  - **Весенний кубок по волейболу** (ID: 203)
    - Вид спорта: Волейбол
    - Город: Санкт-Петербург
    - Статус: Активный
    - Позиция: 3 место

- **Пользователь 3 (Алексей Сидоров)**:
  - **Хоккейная лига** (ID: 204)
    - Вид спорта: Хоккей
    - Город: Новосибирск
    - Статус: Активный
    - Позиция: 4 место

### Рекомендуемые чемпионаты

Для каждого пользователя предлагаются чемпионаты, соответствующие его интересам.

### Приглашения

- **Пользователь 1 (Иван Иванов)**:
  - Приглашение в команду "Динамо" (Футбол)
  - Приглашение в оргкомитет "Оргкомитет летнего турнира"

- **Пользователь 2 (Петр Петров)**:
  - Приглашение в команду "Торпедо" (Хоккей)

- **Пользователь 3 (Алексей Сидоров)**:
  - Нет приглашений

## Примеры использования

### Получение данных пользователя по номеру телефона

```bash
curl -X GET http://localhost:8080/api/users/by-phone/79001234567
```

### Получение команд пользователя

```bash
curl -X GET http://localhost:8080/api/users/1/teams
```

### Получение чемпионатов пользователя

```bash
curl -X GET http://localhost:8080/api/users/1/championships
```

### Получение предстоящих матчей пользователя

```bash
curl -X GET "http://localhost:8080/api/users/1/matches?status=upcoming"
```

### Получение детальной информации о команде

```bash
curl -X GET http://localhost:8080/api/teams/101
```

### Принятие приглашения в команду

```bash
curl -X POST http://localhost:8080/api/invitations/team/401/accept
```

### Отклонение участия в матче

```bash
curl -X POST -H "Content-Type: application/json" -d '{"team_id":101,"reason":"Не можем участвовать"}' http://localhost:8080/api/matches/301/decline
```